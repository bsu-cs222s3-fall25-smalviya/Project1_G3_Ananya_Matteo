plugins {
    id 'java'
    id 'application'
    id("org.openjfx.javafxplugin") version "0.1.0"
}

repositories {
    mavenCentral()
}

def jfxVersion = '21.0.4'

group = "edu.bsu.project1"
version = "1.0-SNAPSHOT"

dependencies {
    implementation 'com.jayway.jsonpath:json-path:2.9.0'
    implementation 'net.minidev:json-smart:2.5.0'

    implementation "org.openjfx:javafx-controls:${jfxVersion}"
    implementation "org.openjfx:javafx-graphics:${jfxVersion}"
    implementation "org.openjfx:javafx-base:${jfxVersion}"
    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.0'
}

application {
    mainClass = 'edu.bsu.project1.WikipediaRevisionReporter'
    applicationDefaultJvmArgs = [
            "--module-path", "/Users/matteob/Downloads/javafx-sdk-25/lib",
            "--add-modules", "javafx.controls,javafx.fxml"
    ]
}
tasks.named('run') {
    standardInput = System.in
}

dependencies {
    implementation 'org.slf4j:slf4j-simple:2.0.13'
}

tasks.register('runGui', JavaExec) {
    group = 'application'
    description = 'Run the JavaFX GUI'
    classpath = sourceSets.main.runtimeClasspath
    mainClass.set('edu.bsu.project1.WikipediaGuiApp')

    // Add JavaFX modules
    jvmArgs = [
            '--module-path', configurations.runtimeClasspath.asPath,
            '--add-modules', 'javafx.controls,javafx.graphics,javafx.base'
    ]
}  // macOS/Linux users on modular JDK usually don't need extra args with OpenJFX 21+

test { useJUnitPlatform() }
java { toolchain { languageVersion = JavaLanguageVersion.of(17) } }